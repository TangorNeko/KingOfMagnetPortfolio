# **目次**
### 1. [作品概要](#anc1)
### 2. [画面分割](#anc2)
### 3. [ブルーム](#anc3)
### 4. [シャドウ](#anc4)
### 5. [カプセルコライダー](#anc5)

<a id="anc1"></a>

# **作品概要**
* ## 使用ツール
    Visual Studio 2019  
    Visual Studio Code  
    3ds Max 2021  
    Adobe Photoshop Elements 2020  
    Git
* ## 使用言語
    C++  
    HLSL
* ## 開発環境
    Windows10
    DirectX12
* ## 制作人数
    4人
* ## 開発期間
    2021年2月～2021年7月

<a id="anc2"></a>

# **画面分割**
<img src="Pictures/Viewport1.png" width="540">    

複数のVIEWPORTを用意することで画面分割を実装しています。  
分割せず画面全体に表示したいスプライト等のため、  
画面全体を覆うVIEWPORTも用意し、そちらでスプライト等の描画を行っています。  
<img src="Pictures/Viewport2.png" width="540">

<a id="anc3"></a>

# **ブルーム**
川瀬式ブルームを実装。  
通常シーンをレンダリング後、輝度が高いピクセルを抽出し、  
ブラーとダウンサンプリングをかけながら複数枚のテクスチャを作成し、  
複数枚のテクスチャの平均を取って加算合成しています。  
<img src="Pictures/Bloom1.png" width="540">  
通常シーン  
<img src="Pictures/Bloom2.png" width="540">  
輝度抽出したテクスチャ  
<img src="Pictures/Bloom3.png" width="540">  
ブラーをかけながらダウンサンプリングしたテクスチャ  
<img src="Pictures/Bloom4.png" width="540">  
加算合成後  

<a id="anc4"></a>

# **シャドウ**
今回は平行光源によるデプスシャドウを実装しています。  
平行光源のため、深度値をカメラからの距離ではなく、  
カメラ空間のXY平面からの最短距離を計算して使用しています。
<img src="Pictures/Shadow1.png" width="540">  
通常の光源での深度値の計算  
<img src="Pictures/Shadow2.png" width="540">  
平行光源での深度値の計算  
<img src="Pictures/Shadow3.png" width="540">  
作成されたシャドウマップ    

<a id="anc5"></a>

# **カプセルコライダー**
プレイヤーと弾との当たり判定のため、カプセルコライダーを作成し、使用しています。  
移動処理によって移動する前の弾の座標と、移動した後の弾の座標を  
カプセルの端点にすることで、スピードの速い弾でもプレイヤーをすり抜けることなく  
判定する事ができます。
<img src="Pictures/CapsuleCollider1.png" width="540">  

# **弾の発射先の決定**
三人称視点のゲームのため、どうしても照準で狙う方向とプレイヤーが弾を発射する方向が  
ずれてしまいます。
そこで、カメラから照準の方向にレイを飛ばし、  
最初にレイがステージのモデルに当たった座標に向かって弾を発射するようにしています。

<img src="Pictures/ShotRay1.png" width="540">  

しかし、これだけでは相手プレイヤーを狙ったとしてもその奥にあるステージを狙う事になり、  
相手プレイヤーに向かって弾を飛ばす事が困難です。
